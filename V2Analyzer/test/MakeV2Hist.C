TFile * tf;
TH2D * hv2;
TH2D * hcnt;
TH1D * h5_10;
TH1D * h40_50;
TH1D * cnt5_10;
TH1D * cnt40_50;
void MakeV2Hist(){
  tf = new TFile("../data/rpflat_combined.root");
  hv2 = (TH2D *) tf->Get("v2analyzer/v2/v2Reco/EvtPlaneFromTracksMidEta/psi_EvtPlaneFromTracksMidEta_11");
  hcnt = (TH2D *) tf->Get("v2analyzer/v2/v2Reco/EvtPlaneFromTracksMidEta/cnt_EvtPlaneFromTracksMidEta_11");
  h5_10 = (TH1D *) hv2->ProjectionY("h5_10",2,2);
  h40_50 = (TH1D *) hv2->ProjectionY("h40_50",7,7);
  cnt5_10 = (TH1D *) hcnt->ProjectionY("cnt5_10",2,2);
  cnt40_50 = (TH1D *) hcnt->ProjectionY("cnt40_50",7,7);
  Double_t c5_10 = cnt5_10->Integral(1,cnt5_10->GetNbinsX());
  Double_t c40_50 = cnt40_50->Integral(1,cnt40_50->GetNbinsX());
  Double_t deta = 0.4;
  Double_t dphi = h5_10->GetBinWidth(1);
  h5_10->Scale(1./(deta*c5_10*dphi));
  h40_50->Scale(1./(deta*c40_50*dphi));
  TCanvas * c1 = new TCanvas("v2Dist","v2Dist",650,550);
  h5_10->SetStats(kFALSE);
  h5_10->SetMaximum(1.4);
  h5_10->SetTitle("");
  h5_10->SetYTitle("#frac{1}{N_{ev}} #frac{d^{2}N}{d#eta d#phi}");
  h5_10->SetXTitle("#phi_{2}");
  gPad->SetLeftMargin(0.2);
  h5_10->GetYaxis()->SetTitleOffset(1.4);
  h5_10->GetXaxis()->SetTitleOffset(0.8);
  h5_10->SetMarkerStyle(26);
  h5_10->SetMarkerColor(kBlue);
  h40_50->SetMarkerStyle(25);
  h40_50->SetMarkerColor(kRed);
  h5_10->Draw();
  h40_50->Draw("same");
  TF1 * v2Fit5 = new TF1("v2Fit5","[0]*(1+2*[1]*TMath::Cos(2.0*x))",-TMath::PiOver2()+0.1,TMath::PiOver2()-0.1); 
  v2Fit5->SetLineStyle(1);
  v2Fit5->SetLineColor(kBlue+2);
  TF1 * v2Fit40 = new TF1("v2Fit40","[0]*(1+2*[1]*TMath::Cos(2.0*x))",-TMath::PiOver2()+0.1,TMath::PiOver2()-0.1); 
  v2Fit40->SetLineStyle(1);
  v2Fit40->SetLineColor(kRed+2);
  h5_10->Fit(v2Fit5,"qrn");
  h40_50->Fit(v2Fit40,"qrn");
  v2Fit5->Draw("same");
  v2Fit40->Draw("same");
  TLegend * leg = new TLegend(0.45,0.2,0.65,0.4);
  leg->AddEntry(h5_10,"5-10\%","p");
  leg->AddEntry(h40_50,"40-50\%","p");
  leg->Draw();
  c1->Print("v2Dist.pdf","pdf");
}
